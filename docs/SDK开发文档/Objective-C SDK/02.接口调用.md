# 接口调用

## 1、拍照 回调 信息

```objective-c
 __weak typeof(&*self) ws = self;

    //顾客 ID  门店ID  必填，要和图片 、仪器绑定   顾客名字可以不填
    MoreCameraVC *vc =[[MoreCameraVC alloc]initWithCustomerID:@"8" shopID:@"12345"  customerName:@"sfd"];

    vc.saveBlock = ^(NSArray * _Nonnull images,NSDictionary *_Nonnull info) {//获取图片：拍照完成，点击完成的回调
        @synchronized (ws.layout) {
            [ws.layout removeAllObjects];
            [ws.layout addObjectsFromArray:images];
        }
        
        dispatch_async(dispatch_get_main_queue(), ^{
            [ws.collectionView reloadData];
        });
        
    };
    [self presentViewController:vc  animated:YES completion:nil];
```



### 传入 拍照字段说明

| 字段名       | 类型   | 说明     |
| ------------ | ------ | -------- |
| CustomerID   | string | 顾客 ID  |
| shopID       | string | 门店ID   |
| customerName | string | 账户名称 |



### 回调 'AI' 图片信息字段说明

| 字段名    | 类型   | 说明     |
| --------- | ------ | -------- |
| name      | string | 图片路径 |
| image     | string | 为空     |
| imageType | string | ai       |



### 回调 'local' 图片信息字段说明

| 字段名    | 类型    | 说明     |
| --------- | ------- | -------- |
| name      | string  | 图片名称 |
| image     | UIImage | UIImage  |
| imageType | string  | local    |



### 回调 'info' 信息字段说明 用于获取检测报告的请求

| 字段名       | 类型   | 说明             |
| ------------ | ------ | ---------------- |
| caseGroundID | string | 当前图片案例组ID |
| customerID   | string | 顾客ID           |
| shopID       | string | 门店ID           |



```
/**
 拍照成功的回调
 
 @param images 字典数组包含图片信息（name:图片url,image:原图，imageType:当前图片类型）图片类型：ai 需要服务器生成 、local 本地生成的直接用image  info拍照信息，用于请求检测报告
 */
typedef void(^imageBlock)(NSArray *images,NSDictionary *info);//成功的回调
```

 



## 2、请求检测报告数据字段说明

| 字段         | 类型   | 说明             |
| ------------ | ------ | ---------------- |
| caseGroundID | string | 当前图片案例组ID |
| customerID   | string | 顾客ID           |





```objective-c
#import "MoreOpenImage.h"


/**
 获取检测报告数据信息

 @param param 请求参数
 
 @param success 成功回调
 */
+ (void)getImageInfoByPaht:(NSDictionary *)param process:(void(^)(NSDictionary *info))success;



[MoreOpenImage queryImageInfoByPaht:self.info process:^(NSDictionary * _Nonnull info) {
                YYLog(@"%@",info);
            }];
```



## 返回检测报告数据字段说明

```json
[
  {
    "clientImg": "string",//用户头像
    "clientName": "string",//用户名
    "sex": 0,//性别
    "createTime": 0,//创建时间
    "totalScore": 0,//综合分数
    "mask": {
      "chance": 0,//数量
      "name": "string"//炎症性色素沉着
    },
    "predicted": [
      {
        "predicted": 0,//评分
        "name": "string"//病症
      }
    ],
    "avg": [
      {
        "avg": 0,//评分
        "name": "string"//病症
      }
    ],
    "aiImg": {
      "id": 0,//ID
      "itype": "string",//类型
      "imgurl": "string"//地址
    }
  }
]
```

